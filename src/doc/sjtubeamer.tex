\documentclass[
    UTF8,
    heading=true,
    12pt,
    a4paper
]{ctexrep}

\pagestyle{plain}

\usepackage{pifont}

\ctexset {
    part = {
        format = \bfseries\Huge,
        number = ,
        name = \themename,
        nameformat = \huge
    },
    chapter = {
        beforeskip = 0pt,
        fixskip = true,
        format = \bfseries,
        name = ,
        nameformat = \hfill\huge,
        number = \arabic{chapter},
        aftername = \,\par\hfill,
        titleformat = \LARGE,
        aftertitle = \par\bigskip\nointerlineskip\rule{\linewidth}{2bp}\par
    },
    section = {
        format = \bfseries\large\raggedright,
        number = \raisebox{-.1ex}{\ding{\numexpr181 + \arabic{section}}},
        numberformat = \Large
    }
}

\usepackage[colorlinks]{hyperref}

\usepackage{enumitem}
\setlist[enumerate]{
    itemsep=0pt,
    left=\parindent,
    label=\raisebox{-.1ex}{\large\ding{\numexpr171 + \arabic*}}
}

\usepackage{tcolorbox}
\newtcbox{\xbutton}[1][red]{on line,
arc=3pt,colback=#1!50!black,colframe=#1!50!black,
before upper={\rule[-3pt]{0pt}{10pt}},boxrule=1pt,
boxsep=0pt,left=6pt,right=6pt,top=2pt,bottom=0pt,
fontupper=\sffamily,colupper=white}

\usepackage{iftex}
\ifpdftex 
    % Windows should always use pdflatex to compile this doc
\else
    % *nix should always use xelatex to support fontawesome and ctex
    \usepackage{fontspec}
    \defaultfontfeatures{Extension = .otf}
\fi
\usepackage{fontawesome}
\usepackage{hologo}

\tcbuselibrary{listingsutf8}
\lstset{
    language=[LaTeX]TeX,
    basicstyle=\ttfamily,
    columns=flexible, 
    emph=[1]{usetheme},
    emphstyle=\color{blue},
    extendedchars=false,
    lineskip=-.1cm,
    breaklines
}

\tcbuselibrary{skins,raster}
\newtcbinputlisting[auto counter]{\beamerdemo}[2][1]{
    enhanced jigsaw,
    lower separated=false,
    leftlower=0pt,rightlower=0pt,middle=0pt,
    listing side comment,
    listing file={tutourial/#2},
    listing options={
        style=tcblatex,
        texcsstyle=*\color{red!70!black}
    },
    pdf comment,
    comment style={
        drop lifted shadow,
        graphics pages={#1},
        raster columns=1
    },
    tile,
    title={\faEdit 示例 \thetcbcounter}
}

\newenvironment{beamerdemoraster}[3][]{
    \begin{tcbraster}[raster columns=3,colframe=#2,colback=white,
        colbacktitle=#2!50!white,fonttitle=\small\bfseries\ttfamily,fontupper=\ttfamily,
        left=0pt,right=0pt,top=0pt,bottom=0pt,boxsep=0pt,boxrule=0.6pt,
        toptitle=1mm,bottomtitle=1mm,drop lifted shadow,center title,
        graphics pages={#1}]
        \tcbincludepdf{tutourial/#3.pdf}
    \end{tcbraster}
}{}

\def\themename{\textsf{SJTUBeamer}}

\begin{document}
    \title{\themename}
    \date{\today}
    % \maketitle

    \chapter*{\themename\ 介绍}

    \themename\ 是基于 \texttt{beamer} 文档类的主题宏集。

    \setcounter{tocdepth}{0}
    \tableofcontents

    \part{基础操作}
    \chapter{安装}

    \section{运行环境}

    为了使用 \themename\ 的全部功能，请使用下者之一：
    \begin{enumerate}
        \item \href{https://miktex.org/}{MiK\TeX\ }
        \item \href{https://mirrors.sjtug.sjtu.edu.cn/ctan/systems/texlive/Images/texlive2021-20210325.iso}{\TeX\ Live} 2019 及以上版本
    \end{enumerate}

    % 上传至 Overleaf 后添加对应在线步骤
    % 上传至 CTAN 后本段可以直接更改为安装宏包的标准流程
    \section{下载模板}

    \begin{enumerate}
        \item 前往 GitHub 上的 \faGithub{}~\href{https://github.com/sjtug/SJTUBeamer}{sjtug/SJTUBeamer} 页面，点击 \xbutton[green]{Code} 按钮下载压缩文件，在解压后的主目录里新建 \TeX{} 源文件即可调用该模板。
        \item 或者点击进入存储库侧栏的 \href{https://github.com/sjtug/SJTUBeamer/releases}{\textsf{Releases}} 下载查看最新发布版本，并下载 \textsf{Assets} 栏的 \texttt{sjtubeamer-ctan.zip}。
    \end{enumerate}
    
    \section{测试模板}

    \begin{enumerate}
        \item[ \faApple\ \faLinux] *nix 系统采用 \hologo{XeLaTeX} 编译以获得中文支持。
        \item[ \faWindows] Windows 系统采用 \hologo{pdfLaTeX} 编译以获得更快的编译速度。
    \end{enumerate}

    下面的代码可以用于测试 \themename\ 是否可以正常使用。

    \beamerdemo[1]{step1}
    
    {\small
        \begin{enumerate}
            \item 第一行载入 \texttt{ctex} 宏包提供的 \texttt{ctexbeamer} 文档类。如果不需要中文支持，可以直接使用 \texttt{beamer} 文档类。如果需要使用 16:9 的荧幕比例，可以参照示例 2 的相关参数。
            \item 第二行载入 \texttt{sjtubeamer} 主题。
            \item 使用 \texttt{document} 环境进入文档主体。
            \item 使用 \texttt{frame} 环境创建新的幻灯片（帧）。
            \item 在帧中输入文字即可在屏幕垂直居中位置产生文字。
        \end{enumerate}
    }

    \clearpage

    \chapter{样式}

    在开始填入内容前，应当首先确定需要使用的样式。\themename 目前提供了三种不同的主要主题、两种配色和明暗模式。

    \noindent{\ttfamily\hfil\hspace*{-.5cm} + maxplus \hfil\hfil\hspace*{-.5cm}  + max \hfil\hfil + min \hfil}\par
    \vspace*{-.2cm}
    \begin{beamerdemoraster}[1,3,5,2,4,6]{red}{step2tb}
    \end{beamerdemoraster}

    \begin{beamerdemoraster}[1,2,3]{blue}{step2bd}\marginpar{\ttfamily\raisebox{1.8cm}{+ blue}}\marginpar{\ttfamily\raisebox{-1.8cm}{+ light}}
    \end{beamerdemoraster}
    \vspace*{-.2cm}
    \begin{beamerdemoraster}[1,2,3]{blue}{step2bl}
    \end{beamerdemoraster}

    \clearpage

    \themename 可以与 \texttt{beamer} 提供的九种外样式随意搭配。

    \def\myincludepdf#1{
        \tcbincludepdf[title={#1},
        colframe=red!50!black,colback=red!10!white,
        colbacktitle=red!50!white,left=0pt,right=0pt,top=0pt,
        bottom=0pt,boxsep=0pt,boxrule=0.6pt,
        toptitle=1mm,bottomtitle=1mm,drop lifted shadow,
        center title,fonttitle=\ttfamily]
        {tutourial/step2#1.pdf}
    }
    \begin{tcbitemize}[raster columns=3, raster equal height,
        left=0pt,right=0pt,top=0pt,
        bottom=0pt,boxsep=0pt,boxrule=0pt]
        \tcbitem \myincludepdf{miniframes}
        \tcbitem \myincludepdf{default}
        \tcbitem \myincludepdf{infolines}
        \tcbitem \myincludepdf{smoothbars}
        \tcbitem \myincludepdf{sidebar}
        \tcbitem \myincludepdf{split}
        \tcbitem \myincludepdf{shadow}
        \tcbitem \myincludepdf{tree}
        \tcbitem \myincludepdf{smoothtree}
    \end{tcbitemize}

    \beamerdemo[1]{step2}

    \chapter{草稿}

    在确定版式后，下一步就要输入文字填入内容了。由于 \LaTeX\ 的编译速度较慢，在打草稿的时候，我们推荐开启 \texttt{beamer} 文档类的 \texttt{draft} 模式，只关注于内容。在这种模式下，图片都不会被载入，而是使用一个占位符代替。

    \beamerdemo[1]{step3}

    \begin{enumerate}
        \small
        \item 使用 \texttt{columns} 环境分栏，也可以采用 \texttt{multicol} 宏包提供的 \texttt{multicols} 环境。后者还兼容 \texttt{article} 文档类。
        \item 该模式也会关闭目录与引用的生成。
    \end{enumerate}

    \clearpage

    当然，如果演示文稿的内容过长的话，推荐分成许多个文件编写。最后通过一个主文件拼接起来。如果暂时想专心编写某一部分的内容，可以直接注释掉其他部分的入口。

    \beamerdemo[1]{step4}

    \chapter{封面}

    当内容完成之后，就可以制作封面和封底了。在此之前需要先填写该文档的元数据信息：标题、副标题、作者、组织、日期。

    \beamerdemo[1,2]{step5}

    \begin{enumerate}
        \small
        \item 在载入模板时选择 \texttt{maxplus}, \texttt{max}, \texttt{min} 以使用不同的标题页结尾页模板。
        \item 组织（\texttt{\textbackslash{}institute}）可选，\texttt{min}会根据二级机构的处理方法排列徽标。
        \item \texttt{\textbackslash{}maketitle} 可以制作标题页，\texttt{\textbackslash{}makebottom} 可以制作结束页$^*$。
        \item$^*$ 标题页中 \texttt{\textbackslash{}thanks} 被禁用，\texttt{\textbackslash{}makebottom} 是 \themename\ 专有命令。
        \item[\faWarning] 将元数据写在 \texttt{document} 中可能会产生警告，可无视。
    \end{enumerate}

    \chapter{目录}
    
    目录功能是 \texttt{beamer} 的特色之一。\themename\ 提供了两种插入目录的方法——两种方法也可以共同使用。

    \section{单页目录}

    传统的插入目录的方法就是使用标准的目录命令。

    \beamerdemo[1]{step6+.tex}

    \section{节次提示}

    而新式的方法是使用 \themename\ 优化后的节次页。

    \beamerdemo[4]{step7+.tex}

    \section{分割部分}

    如果内容过多，可以采用 \texttt{\textbackslash{}part} 将内容分割为多个部分。新建一个部分都会新建一个部分页$^*$。

    \beamerdemo[1]{step8+.tex}

    \section{高亮节次}

    使用传统目录也可以在每节开始新建一个目录高亮本节。

    \beamerdemo[1]{step9+.tex}

    \begin{enumerate}\small
        \item 如果想要在幻灯片列表环境产生类似的“渐进切换”效果，可以在 \texttt{itemize} 环境的每一条后使用 \texttt{\textbackslash{}pause} 命令。或者是 \texttt{\textbackslash{}begin\{itemize\}[<+->]}。
    \end{enumerate}

    \chapter{播放}

    制作的演示文稿推荐使用 Adobe Acrobat 播放，浏览器内置的阅读器不支持一些额外功能。

    \section{Adobe Acrobat}

    在 Adobe Acrobat Pro（或免费版本的 Adobe Acrobat Reader）打开演示文稿，在“视图”选单中选择“全屏模式”即可播放。

    \begin{figure}[h]
        \centering
        \begin{tcolorbox}[enhanced, title={视图(V)}, attach boxed title to top left, boxed title style={sharp corners}, sharp corners, tile, width=6cm]
            \faTv\ 全屏模式(F)\hfill Ctrl+L
        \end{tcolorbox}
    \end{figure}

    \section{浏览器阅读器}

    \begin{enumerate}
        \item[\faChrome] Chrome 浏览器以及 *nix 内置的阅读器支持“演示”功能。
        \begin{figure}[h]
            \centering
            \begin{tcolorbox}[enhanced, title={$\vdots$}, attach boxed title to top right, boxed title style={circular arc,top=0mm,bottom=2mm,left=3.25mm,right=3.25mm}, sharp corners, tile, width=6cm]
                演示
            \end{tcolorbox}
        \end{figure} 
        \item[\faInternetExplorer] Edge 浏览器需要调整为“适应宽度”\fbox{\faArrowsH}，并使用 \fbox{\sffamily PageDown} 翻页。尽量不要使用该播放方法。
    \end{enumerate}

    \part{进阶操作}

    \chapter{强调}
    
    在 \themename\ 中有多种强调内容的方法。

    \section{文字强调}

    主要有两种类型：改变字体和提供高对比。
    
    \beamerdemo[1]{step10.tex}

    \begin{enumerate}\small
        \item \texttt{\textbackslash{}alert} 会改变文字颜色为主题色。\texttt{\textbackslash{}emph} 会改变文字颜色的同时，还会将英文字体变为斜体$^*$。
        \item \texttt{\textbackslash{}paragraph} 和 \texttt{\textbackslash{}highlight} 都会在文字底部添加纯色方块$^*$，区别在于后者可以设置背景颜色。
    \end{enumerate}

    \section{区块强调}

    也有两种类型：纯色方块和边缘描边。

    \beamerdemo[1]{step11.tex}

    \beamerdemo[1]{step12.tex}

    \begin{enumerate}\small
        \item \texttt{block}, \texttt{alertblock}, \texttt{exampleblock} 环境分别可以产生与主题色对应的三种盒子。
        \item \texttt{min} 主题的盒子非圆角$^*$。
        \item \texttt{stampbox} 环境可以产生印记边框盒子$^*$，可以丰富视觉效果与统一视觉形象。可接受一个可选参数如 \texttt{[sjtuBluePrimary]} 产生其他颜色的边框。
    \end{enumerate}

    \chapter{代码}

    \themename\ 提供了代码抄录的区块环境。

    \beamerdemo[1]{step13.tex}    

    \begin{enumerate}\small
        \item \texttt{codeblock} 提供了带行号的代码抄录环境$^*$，第一个可选参数可以用于设置语言，第二个必选参数可以设置代码块的标题。
        \item 需要清理抄录代码在源文件中的缩进，顶格输入。
        \item 直接使用 \texttt{listings} 宏包提供的 \texttt{lstlisting} 环境依然可行，\themename\ 已经对其进行了一些预先的优化。
        \item[\faWarning] 使用代码块的页其 \texttt{frame} 环境必须添加 \texttt{fragile} 参数。
    \end{enumerate}

    \chapter{图表}

    表格与统计图是展示数据最直观的方式，可以采用内建的方式插入风格统一的矢量图表。\themename\ 对此设定了一些预设。

    \section{表格}

    考虑到许多专业数据是直接存储在逗号分隔符（\texttt{.csv}）文件中的，便于数据内容的后续更改，用户可以采用 \texttt{pgfplotstable} 宏包从文件插入表格。

    \beamerdemo[1]{step14.tex}

    \begin{enumerate}\small
        \item 需要加载 \texttt{pgfplotstable} 宏包，表头变为主题色，采用三线表的样式。$^*$
        \item 也可以使用标准表格插入的方法，只是不会有这种优化。可以使用 \href{https://www.tablesgenerator.com/latex_tables}{Table Generator} 生成标准表格代码。
    \end{enumerate}

    \section{统计图}

    如果希望通过统计图更加直观地展示数据，可以使用 \texttt{pgfplots} 宏包插入统计图。

    \beamerdemo[1]{step15.tex}

    \begin{enumerate}\small
        \item 需要加载 \texttt{pgfplots} 宏包，必要时额外加载 \texttt{pgfplotstable} 宏包以读取文件数据。可以使用 \href{https://logcreative.github.io/PGFPlotsEdt/}{PGFPlots 统计绘图编辑器} 生成上述代码。
        \item[\faWarning] 过多的统计图会增长编译时间，不宜过多使用。
    \end{enumerate}

    \part{高级操作}
    \chapter{源代码}

\end{document}